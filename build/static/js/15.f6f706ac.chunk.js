(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[15],{1418:function(e,t,a){"use strict";var n=a(55),r=a.n(n),l=a(23),c=a(96),m="[E-COMMERCE APP] GET ORDERS",s="[E-COMMERCE APP] SET ORDERS SEARCH TEXT";function i(e){var t=r.a.get(c.a+"/enquiry/getinbox?uuid="+e);return function(e){return t.then((function(t){e({type:m,payload:t.data})}))}}function o(e){var t=r.a.get(c.a+"/enquiry/getoutbox?uuid="+e);return function(e){return t.then((function(t){e({type:m,payload:t.data})}))}}function u(e,t){return function(a){r.a.put(c.a+"/enquiry/updatestatus",e).then((function(e){e.data&&(a(i(t)),a(Object(l.j)({message:"Status Updated!"})))}))}}function d(e){return{type:s,searchText:e.target.value}}var E=a(36),f="[E-COMMERCE APP] GET ORDER",p="[E-COMMERCE APP] SAVE ORDER";function b(e,t){var a=r.a.get(c.a+"/enquiry/"+e.orderId);return function(e){return a.then((function(t){e({type:f,payload:t.data&&t.data.length?t.data[0]:[]})}))}}function h(e,t,a){return function(n){r.a.post(c.a+"/enquiry/replychat",{id:t,reply:{chatText:e,userId:a,chatDate:""}}).then((function(e){n(Object(E.B)({message:"Comment Added"})),n(b({orderId:t}))}))}}function y(e){var t=r.a.post(c.a+"/api/e-commerce-app/order/save",e);return function(e){return t.then((function(t){return e(Object(E.B)({message:"Enquiry Saved"})),e({type:p,payload:t.data})}))}}a.d(t,"b",(function(){return m})),a.d(t,"d",(function(){return s})),a.d(t,"h",(function(){return i})),a.d(t,"i",(function(){return o})),a.d(t,"f",(function(){return u})),a.d(t,"k",(function(){return d})),a.d(t,"a",(function(){return f})),a.d(t,"c",(function(){return p})),a.d(t,"g",(function(){return b})),a.d(t,"e",(function(){return h})),a.d(t,"j",(function(){return y}))},1422:function(e,t,a){"use strict";var n=a(17),r=a(9),l=a(1418);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(a,!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var s={data:[],searchText:""},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.b:return m({},e,{data:t.payload});case l.d:return m({},e,{searchText:t.searchText});default:return e}};function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(a,!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.a:case l.c:return u({},t.payload);default:return e}},E=Object(n.d)({orders:i,order:d});t.a=E},1471:function(e,t,a){"use strict";a.r(t);var n=a(11),r=a(12),l=a(15),c=a(14),m=a(16),s=a(0),i=a.n(s),o=a(2),u=a(10),d=a(22),E=a(78),f=a(30),p=a(17),b=a(84),h=a.n(b),y=a(394),v=a(4),g=a.n(v),N=a(6),x=[{id:3,name:"Delivered",color:"bg-green-dark text-white"},{id:4,name:"Declined",color:"bg-red-dark text-white"},{id:1,name:"Pending",color:"bg-purple-light text-white"},{id:2,name:"Processed",color:"bg-blue text-white"}],O=function(e){var t=e.name;return i.a.createElement("div",{className:g()("inline text-12 p-4 rounded truncate",N.a.find(x,{id:t}).color)},N.a.find(x,{id:t}).name)},w=a(52),C=Object(w.withStyles)((function(e){return{root:{"& table ":{"& th:first-child, & td:first-child":{paddingLeft:"0!important"},"& th:last-child, & td:last-child":{paddingRight:"0!important"}}},divider:{width:1,backgroundColor:e.palette.divider,height:144},seller:{backgroundColor:e.palette.primary.dark,color:e.palette.getContrastText(e.palette.primary.dark),marginRight:-88,paddingRight:66,width:480,"& .divider":{backgroundColor:e.palette.getContrastText(e.palette.primary.dark),opacity:.5}}}}),{withTheme:!0})((function(e){var t=e.classes,a=e.order,n=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2});return i.a.createElement("div",{className:g()(t.root,"flex-grow flex-no-shrink p-0")},a&&i.a.createElement(o.d,{className:"w-xl mx-auto",elevation:0},i.a.createElement(o.e,{className:"p-88 print:p-0"},i.a.createElement(o.fb,{color:"textSecondary",className:"mb-32"},a.date),i.a.createElement("div",{className:"flex justify-between"},i.a.createElement("div",null,i.a.createElement("table",{className:"mb-16"},i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{className:"pr-16 pb-4"},i.a.createElement(o.fb,{className:"font-light",variant:"h6",color:"textSecondary"},"INVOICE")),i.a.createElement("td",{className:"pb-4"},i.a.createElement(o.fb,{className:"font-light",variant:"h6",color:"inherit"},a.reference))))),i.a.createElement(o.fb,{color:"textSecondary"},a.customer.firstName+" "+a.customer.lastName),a.customer.invoiceAddress.address&&i.a.createElement(o.fb,{color:"textSecondary"},a.customer.invoiceAddress.address),a.customer.phone&&i.a.createElement(o.fb,{color:"textSecondary"},a.customer.phone),a.customer.email&&i.a.createElement(o.fb,{color:"textSecondary"},a.customer.email)),i.a.createElement("div",{className:g()(t.seller,"flex items-center p-16")},i.a.createElement("img",{className:"w-80",src:"assets/images/logos/fuse.svg",alt:"logo"}),i.a.createElement("div",{className:g()(t.divider,"divider ml-8 mr-16 h-96")}),i.a.createElement("div",null,i.a.createElement(o.fb,{color:"inherit"},"FUSE INC."),i.a.createElement(o.fb,{color:"inherit"},"2810 Country Club Road Cranford, NJ 07016"),i.a.createElement(o.fb,{color:"inherit"},"+66 123 455 87"),i.a.createElement(o.fb,{color:"inherit"},"hello@fuseinc.com"),i.a.createElement(o.fb,{color:"inherit"},"www.fuseinc.com")))),i.a.createElement("div",{className:"mt-64"},i.a.createElement(o.U,{className:"simple"},i.a.createElement(o.X,null,i.a.createElement(o.Z,null,i.a.createElement(o.W,null,"PRODUCT"),i.a.createElement(o.W,null,"PRICE"),i.a.createElement(o.W,{align:"right"},"QUANTITY"),i.a.createElement(o.W,{align:"right"},"TOTAL"))),i.a.createElement(o.V,null,a.products.map((function(e){return i.a.createElement(o.Z,{key:e.id},i.a.createElement(o.W,null,i.a.createElement(o.fb,{variant:"subtitle1"},e.name)),i.a.createElement(o.W,{align:"right"},n.format(e.price)),i.a.createElement(o.W,{align:"right"},e.quantity),i.a.createElement(o.W,{align:"right"},n.format(e.price*e.quantity)))})))),i.a.createElement(o.U,{className:"simple mt-32"},i.a.createElement(o.V,null,i.a.createElement(o.Z,null,i.a.createElement(o.W,null,i.a.createElement(o.fb,{className:"font-medium",variant:"subtitle1",color:"textSecondary"},"SUBTOTAL")),i.a.createElement(o.W,{align:"right"},i.a.createElement(o.fb,{className:"font-medium",variant:"subtitle1",color:"textSecondary"},n.format(a.subtotal)))),i.a.createElement(o.Z,null,i.a.createElement(o.W,null,i.a.createElement(o.fb,{className:"font-medium",variant:"subtitle1",color:"textSecondary"},"TAX")),i.a.createElement(o.W,{align:"right"},i.a.createElement(o.fb,{className:"font-medium",variant:"subtitle1",color:"textSecondary"},n.format(a.tax)))),i.a.createElement(o.Z,null,i.a.createElement(o.W,null,i.a.createElement(o.fb,{className:"font-medium",variant:"subtitle1",color:"textSecondary"},"DISCOUNT")),i.a.createElement(o.W,{align:"right"},i.a.createElement(o.fb,{className:"font-medium",variant:"subtitle1",color:"textSecondary"},n.format(a.discount)))),i.a.createElement(o.Z,null,i.a.createElement(o.W,null,i.a.createElement(o.fb,{className:"font-light",variant:"h4",color:"textSecondary"},"TOTAL")),i.a.createElement(o.W,{align:"right"},i.a.createElement(o.fb,{className:"font-light",variant:"h4",color:"textSecondary"},n.format(a.total))))))),i.a.createElement("div",{className:"mt-96"},i.a.createElement(o.fb,{className:"mb-24 print:mb-12",variant:"body1"},"Please pay within 15 days. Thank you for your business."),i.a.createElement("div",{className:"flex"},i.a.createElement("div",{className:"flex-no-shrink mr-24"},i.a.createElement("img",{className:"w-32",src:"assets/images/logos/fuse.svg",alt:"logo"})),i.a.createElement(o.fb,{className:"font-medium mb-64",variant:"caption",color:"textSecondary"},"In condimentum malesuada efficitur. Mauris volutpat placerat auctor. Ut ac congue dolor. Quisque scelerisque lacus sed feugiat fermentum. Cras aliquet facilisis pellentesque. Nunc hendrerit quam at leo commodo, a suscipit tellus dapibus. Etiam at felis volutpat est mollis lacinia. Mauris placerat sem sit amet velit mollis, in porttitor ex finibus. Proin eu nibh id libero tincidunt lacinia et eget eros."))))))})),S=a(1418),j=a(1422),P=function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,m=new Array(r),s=0;s<r;s++)m[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(m)))).state={tabValue:0,form:null,map:"shipping",comment:""},a.handleChangeTab=function(e,t){a.setState({tabValue:t})},a.handleChangeComment=function(e){a.setState({comment:e.target.value})},a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.props.getOrder(this.props.match.params,this.props.auth.user._id)}},{key:"render",value:function(){var e=this,t=this.props.order,a=this.state,n=a.tabValue,r=a.comment;return i.a.createElement(u.m,{classes:{content:"flex",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:t&&i.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},i.a.createElement("div",{className:"flex flex-1 flex-col items-center sm:items-start"},i.a.createElement(u.a,{animation:"transition.slideRightIn",delay:300},i.a.createElement(o.fb,{className:"normal-case flex items-center sm:mb-12",component:d.a,role:"button",to:"/apps/e-commerce/orders"},i.a.createElement(o.u,{className:"mr-4 text-20"},"arrow_back"),"Enquiry")),i.a.createElement("div",{className:"flex flex-col min-w-0 items-center sm:items-start"},i.a.createElement(u.a,{animation:"transition.slideLeftIn",delay:300},i.a.createElement(o.fb,{className:"text-16 sm:text-20 truncate"},"Enquiry "+t.enquiry[0].chatText)),i.a.createElement(u.a,{animation:"transition.slideLeftIn",delay:300},i.a.createElement(o.fb,{variant:"caption"},"From "+t.sender[0].userName))))),contentToolbar:i.a.createElement(o.bb,{value:n,onChange:this.handleChangeTab,indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64"}},i.a.createElement(o.T,{className:"h-64 normal-case",label:"Enquiry"})),content:t&&i.a.createElement("div",{className:"p-16 sm:p-24 max-w-2xl w-full"},0===n&&i.a.createElement("div",null,i.a.createElement("div",{className:"pb-48"},i.a.createElement("div",{className:"pb-16 flex items-center"},i.a.createElement(o.u,{className:"mr-16",color:"action"},"account_circle"),i.a.createElement(o.fb,{className:"h2",color:"textSecondary"},"Buyer Detail")),i.a.createElement("div",{className:"mb-24"},i.a.createElement("div",{className:"table-responsive mb-16"},i.a.createElement("table",{className:"simple"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Name"),i.a.createElement("th",null,"Email"),i.a.createElement("th",null,"Company"))),i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("div",{className:"flex items-center"},i.a.createElement(o.fb,{className:"truncate"},t.sender[0].smeName))),i.a.createElement("td",null,i.a.createElement(o.fb,{className:"truncate"},t.sender[0].email)),i.a.createElement("td",null,i.a.createElement("span",{className:"truncate"},t.sender[0].cr)))))),i.a.createElement("div",{className:"pb-16 flex items-center"},i.a.createElement(o.u,{className:"mr-16",color:"action"},"account_circle"),i.a.createElement(o.fb,{className:"h2",color:"textSecondary"},"Product Detail")),i.a.createElement("div",{className:"table-responsive mb-16"},i.a.createElement("table",{className:"simple"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Name"),i.a.createElement("th",null,"Description"),i.a.createElement("th",null,"Quantity"),i.a.createElement("th",null,"Price"),i.a.createElement("th",null,"Discount"),i.a.createElement("th",null,"Total"))),i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement("div",{className:"flex items-center"},i.a.createElement(o.fb,{className:"truncate"},t.product[0].name))),i.a.createElement("td",null,i.a.createElement(o.fb,{className:"truncate"},t.product[0].description)),i.a.createElement("td",null,i.a.createElement("span",{className:"truncate"},t.quantity)),i.a.createElement("td",null,i.a.createElement("span",{className:"truncate"},t.unitPrice)),i.a.createElement("td",null,i.a.createElement("span",{className:"truncate"},t.product[0].discount)),i.a.createElement("td",null,i.a.createElement("span",{className:"truncate"},t.totalCost)))))),i.a.createElement("div",{className:"pb-16 flex items-center"},i.a.createElement(o.u,{className:"mr-16",color:"action"},"account_circle"),i.a.createElement(o.fb,{className:"h2",color:"textSecondary"},"Conversation")),i.a.createElement("div",{className:"table-responsive mb-16"},i.a.createElement("table",{className:"simple"},i.a.createElement("thead",null,t.enquiry.map((function(t){return i.a.createElement("tr",null,i.a.createElement("th",{style:t.userId===e.props.auth.user._id?{textAlign:"right",backgroundColor:"#f5f5f5"}:{}},t.chatText," ",i.a.createElement("br",null),i.a.createElement("small",null,h()(t.chatDate).format("dddd, MMM DD YYYY : HH:mm a"))))}))))))),i.a.createElement("div",{className:"pb-48"},i.a.createElement("div",{className:"pb-16 flex items-center"},i.a.createElement(o.u,{className:"mr-16",color:"action"},"access_time"),i.a.createElement(o.fb,{className:"h2",color:"textSecondary"},"Enquiry Status")),i.a.createElement("div",{className:"table-responsive"},i.a.createElement("table",{className:"simple"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Status"),i.a.createElement("th",null,"Updated On"))),i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",null,i.a.createElement(O,{name:t.status})),i.a.createElement("td",null,i.a.createElement("span",null,h()(t.createdDate).format("dddd, MMM DD YYYY : HH:mm a"))))))),i.a.createElement("div",{className:"table-responsive"},i.a.createElement(o.cb,{className:"mt-8 mb-16",id:"comment",name:"comment",onChange:this.handleChangeComment,label:"Comment",type:"text",value:r,multiline:!0,rows:5,variant:"outlined",fullWidth:!0})),i.a.createElement(o.c,{variant:"contained",onClick:function(){return e.props.addComment(r,t._id,e.props.auth.user._id)},color:"secondary"},"Reply"))),1===n&&i.a.createElement("div",{className:"table-responsive"},i.a.createElement("table",{className:"simple"},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Product Name"),i.a.createElement("th",null,"Unit Price"),i.a.createElement("th",null,"Quantity"),i.a.createElement("th",null,"Dicount"),i.a.createElement("th",null,"Total Cost"))),i.a.createElement("tbody",null,t.products.map((function(e){return i.a.createElement("tr",{key:e.productId},i.a.createElement("td",{className:"w-64 text-left"},i.a.createElement(o.fb,{component:d.a,to:"/apps/product/edit/"+e.productId,className:"truncate",style:{color:"inherit",textDecoration:"underline"}},e.name)),i.a.createElement("td",{className:"w-64 text-left"},i.a.createElement("span",{className:"truncate"},"OMR ",e.unitPrice)),i.a.createElement("td",{className:"w-64 text-left"},i.a.createElement("span",{className:"truncate"},e.quantity)),i.a.createElement("td",{className:"w-64 text-left"},i.a.createElement("span",{className:"truncate"},e.discount,"%")),i.a.createElement("td",{className:"w-64 text-left"},i.a.createElement("span",{className:"truncate"},"OMR ",e.totalCost)))}))))),-2===n&&i.a.createElement(C,{order:t})),innerScroll:!0})}}]),t}(s.Component);t.default=Object(y.a)("eCommerceApp",j.a)(Object(E.g)(Object(f.a)((function(e){var t=e.eCommerceApp,a=e.auth;return{order:t.order,auth:a}}),(function(e){return Object(p.c)({getOrder:S.g,saveOrder:S.j,addComment:S.e},e)}))(P)))}}]);
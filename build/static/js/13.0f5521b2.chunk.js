(this["webpackJsonpfuse-react-app"]=this["webpackJsonpfuse-react-app"]||[]).push([[13],{1417:function(e,t,a){"use strict";var r=a(55),n=a.n(r),c=a(36),l=a(96),s="[E-COMMERCE APP] GET PRODUCTS",i="[E-COMMERCE APP] SET PRODUCTS SEARCH TEXT";function o(e){var t;return t=n.a.get(l.a+"/product?createdBy="+e),function(e){return t.then((function(t){e({type:s,payload:t.data})}))}}function u(e,t){var a=n.a.post(l.a+"/product/updatestatus",e);return function(e){a.then((function(a){e(Object(c.B)({message:"Status Updated"})),e(o(t))}))}}function m(e,t){var a=n.a.post(l.a+"/product/updateapprove",e);return function(e){a.then((function(a){e(Object(c.B)({message:"Status Updated"})),e(o(t))}))}}function d(e){return{type:i,searchText:e.target.value}}var p=a(10),f="[E-COMMERCE APP] GET PRODUCT",E="[E-COMMERCE APP] SAVE PRODUCT",b="[E-COMMERCE APP] GET CATS";function h(e){var t=e.productId,a=n.a.get(l.a+"/product/"+t);return function(e){return a.then((function(t){e({type:f,payload:t.data[0]})}))}}function y(e){var t=n.a.get(l.a+"/productcategory?listingType="+e);return function(e){return t.then((function(t){var a=t.data.map((function(e){return{value:e.name,label:e.name}}));e({type:b,payload:a})}))}}function v(e){var t=n.a.post(l.a+"/product/create",e);return function(e){return t.then((function(t){return e(Object(c.B)({message:"Product Saved"})),e(function(e){var t=n.a.post(l.a+"/dashboard/create",{productId:e._id,productOwnerId:e.createdBy,analytic:"PRODUCT_ADDED"});return function(e){return t.then((function(t){return e({type:"TES-TST",payload:t.data})}))}}(t.data)),e({type:E,payload:t.data})}))}}function g(e){var t=n.a.put(l.a+"/product/"+e._id,e);return function(e){return t.then((function(t){return e(Object(c.B)({message:"Product Saved"})),e({type:E,payload:t.data})}))}}function O(e){var t={id:p.v.generateGUID(),uuid:e,name:"",handle:"",description:"",categories:[],tags:[],images:[],price:"",listingType:"service",starRating:0,discount:5,quantity:0,sku:"",width:"",height:"",depth:"",weight:"",status:1};return{type:f,payload:t}}var P="[E-COMMERCE APP] GET CATEGORIES",N="[E-COMMERCE APP] SET CATEGORIES SEARCH TEXT";var w="[E-COMMERCE APP] GET CATEGORY",j="[E-COMMERCE APP] SAVE CATEGORY";a.d(t,"f",(function(){return s})),a.d(t,"j",(function(){return i})),a.d(t,"a",(function(){return"[E-COMMERCE APP] SET PRODUCTS SEARCH TEXT"})),a.d(t,"o",(function(){return o})),a.d(t,"k",(function(){return u})),a.d(t,"l",(function(){return m})),a.d(t,"s",(function(){return d})),a.d(t,"e",(function(){return f})),a.d(t,"h",(function(){return E})),a.d(t,"d",(function(){return b})),a.d(t,"n",(function(){return h})),a.d(t,"m",(function(){return y})),a.d(t,"r",(function(){return v})),a.d(t,"q",(function(){return g})),a.d(t,"p",(function(){return O})),a.d(t,"b",(function(){return P})),a.d(t,"i",(function(){return N})),a.d(t,"c",(function(){return w})),a.d(t,"g",(function(){return j}))},1421:function(e,t,a){"use strict";var r=a(17),n=a(9),c=a(1417);function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var i={data:[],searchText:""},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.f:return s({},e,{data:t.payload});case c.j:return s({},e,{searchText:t.searchText});case c.a:return s({},e,{data:t.payload});default:return e}};function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={data:null,categories:null},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.e:case c.h:return m({},e,{data:t.payload});case c.d:return m({},e,{categories:t.payload});default:return e}};function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={data:[],searchText:""},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.b:return E({},e,{data:t.payload});case c.i:return E({},e,{searchText:t.searchText});default:return e}};function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(a,!0).forEach((function(t){Object(n.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={data:null},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c.c:case c.g:return v({},e,{data:t.payload});default:return e}},P=Object(r.d)({products:o,product:p,categories:h,category:O});t.a=P},1454:function(e,t,a){"use strict";a.r(t);var r=a(11),n=a(12),c=a(15),l=a(14),s=a(16),i=a(0),o=a.n(i),u=a(2),m=a(52),d=a(10),p=a(54),f=a(22),E=a(78),b=a(17),h=a(30),y=a(4),v=a.n(y),g=a(6),O=a(394),P=a(1417),N=a(1421),w=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(s)))).state={tabValue:0,form:null},a.updateFormState=function(){a.setState({form:a.props.product.data})},a.updateProductState=function(){var e=a.props.match.params;a.props.getProduct(e),a.props.getCats(a.props.user.uuid)},a.handleChangeTab=function(e,t){a.setState({tabValue:t})},a.goToEditProduct=function(){var e=a.props.match.params;a.props.history.push("/apps/product/edit/"+e.productId)},a.renderFields=function(){var e=a.state.form.additionalFields;if(e)return o.a.createElement("div",{className:"table-responsive mb-16"},o.a.createElement("table",{className:"simple",style:{width:"60%"}},o.a.createElement("tbody",null,e.map((function(e,t){var a=e.labelField.fieldvalue||"",r=e.valueField.fieldvalue||"";return o.a.createElement("tr",{key:t},o.a.createElement("td",null,o.a.createElement("div",{className:"flex items-center"},o.a.createElement(u.fb,{className:"truncate"},a))),o.a.createElement("td",null,o.a.createElement(u.fb,{className:"truncate"},r)))})))))},a}return Object(s.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){this.updateProductState()}},{key:"componentDidUpdate",value:function(e,t,a){g.a.isEqual(this.props.location,e.location)||this.updateProductState(),(this.props.product.data&&!this.state.form||this.props.product.data&&this.state.form&&this.props.product.data.id!==this.state.form.id)&&this.updateFormState()}},{key:"canBeSubmitted",value:function(){return this.state.form.name.length>0&&!g.a.isEqual(this.props.product.data,this.state.form)}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,r=a.tabValue,n=a.form;return o.a.createElement(d.m,{classes:{toolbar:"p-0",header:"min-h-72 h-72 sm:h-136 sm:min-h-136"},header:n&&o.a.createElement("div",{className:"flex flex-1 w-full items-center justify-between"},o.a.createElement("div",{className:"flex flex-col items-start max-w-full"},o.a.createElement(d.a,{animation:"transition.slideRightIn",delay:300},o.a.createElement(u.fb,{className:"normal-case flex items-center sm:mb-12",component:f.a,role:"button",to:"/apps/products"},o.a.createElement(u.u,{className:"mr-4 text-20"},"arrow_back"),"Products")),o.a.createElement("div",{className:"flex items-center max-w-full"},o.a.createElement(d.a,{animation:"transition.expandIn",delay:300},n.images.length>0&&g.a.find(n.images,{isFeatured:!0})?o.a.createElement("img",{className:"w-32 sm:w-48 mr-8 sm:mr-16 rounded",src:g.a.find(n.images,{isFeatured:!0}).url,alt:n.name}):o.a.createElement("img",{className:"w-32 sm:w-48 mr-8 sm:mr-16 rounded",src:"assets/images/ecommerce/product-image-placeholder.png",alt:n.name})),o.a.createElement("div",{className:"flex flex-col min-w-0"},o.a.createElement(d.a,{animation:"transition.slideLeftIn",delay:300},o.a.createElement(u.fb,{className:"text-16 sm:text-20 truncate"},n.name?n.name:"New Product")),o.a.createElement(d.a,{animation:"transition.slideLeftIn",delay:300},o.a.createElement(u.fb,{variant:"caption"},"Product Detail"))))),o.a.createElement(d.a,{animation:"transition.slideRightIn",delay:300},o.a.createElement(u.c,{className:"whitespace-no-wrap",variant:"contained",onClick:function(){return e.goToEditProduct()}},"Edit"))),contentToolbar:o.a.createElement(u.bb,{value:r,onChange:this.handleChangeTab,indicatorColor:"secondary",textColor:"secondary",variant:"scrollable",scrollButtons:"auto",classes:{root:"w-full h-64"}},o.a.createElement(u.T,{className:"h-64 normal-case",label:"Basic Info"}),o.a.createElement(u.T,{className:"h-64 normal-case",label:"Product Images"}),o.a.createElement(u.T,{className:"h-64 normal-case",label:"Pricing"}),o.a.createElement(u.T,{className:"h-64 normal-case",label:"Inventory"}),o.a.createElement(u.T,{className:"h-64 normal-case",label:"Shipping"}),o.a.createElement(u.T,{className:"h-64 normal-case",label:"Addional Fields"})),content:n&&o.a.createElement("div",{className:"p-16 sm:p-24 max-w-2xl"},0===r&&o.a.createElement("div",null,o.a.createElement("div",{className:"table-responsive mb-16"},o.a.createElement("table",{className:"simple",style:{width:"60%"}},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{className:"flex items-center"},o.a.createElement(u.fb,{className:"truncate"},"Name"))),o.a.createElement("td",null,o.a.createElement(u.fb,{className:"truncate"},n.name))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{className:"flex items-center"},o.a.createElement(u.fb,{className:"truncate"},"Description"))),o.a.createElement("td",null,o.a.createElement(u.fb,{className:"truncate"},n.description))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{className:"flex items-center"},o.a.createElement(u.fb,{className:"truncate"},"Categories"))),o.a.createElement("td",null,o.a.createElement(u.fb,{className:"truncate"},n.categories.join(", ")))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{className:"flex items-center"},o.a.createElement(u.fb,{className:"truncate"},"Tags"))),o.a.createElement("td",null,o.a.createElement(u.fb,{className:"truncate"},n.tags.join(", ")))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{className:"flex items-center"},o.a.createElement(u.fb,{className:"truncate"},"Listing Type"))),o.a.createElement("td",null,o.a.createElement(u.fb,{className:"truncate"},n.listingType))))))),1===r&&o.a.createElement("div",null,o.a.createElement("div",{className:"flex justify-center sm:justify-start flex-wrap"},o.a.createElement("div",{className:"flex justify-center sm:justify-start flex-wrap"},n.images.map((function(a){return o.a.createElement("div",{onClick:function(){return e.setFeaturedImage(a.id)},className:v()(t.productImageItem,"flex items-center justify-center relative w-128 h-128 rounded-4 mr-16 mb-16 overflow-hidden cursor-pointer",a.isFeatured&&"featured"),key:a.id},o.a.createElement(u.u,{className:t.productImageFeaturedStar},"star"),o.a.createElement("img",{className:"max-w-none w-auto h-full",src:a.url,alt:"product"}))}))))),2===r&&o.a.createElement("div",null,o.a.createElement("div",{className:"table-responsive mb-16"},o.a.createElement("table",{className:"simple",style:{width:"60%"}},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{className:"flex items-center"},o.a.createElement(u.fb,{className:"truncate"},"Price"))),o.a.createElement("td",null,o.a.createElement(u.fb,{className:"truncate"},n.price))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{className:"flex items-center"},o.a.createElement(u.fb,{className:"truncate"},"Discount"))),o.a.createElement("td",null,o.a.createElement(u.fb,{className:"truncate"},n.discount))))))),3===r&&o.a.createElement("div",null,o.a.createElement("div",{className:"table-responsive mb-16"},o.a.createElement("table",{className:"simple",style:{width:"60%"}},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{className:"flex items-center"},o.a.createElement(u.fb,{className:"truncate"},"Quantity"))),o.a.createElement("td",null,o.a.createElement(u.fb,{className:"truncate"},n.quantity))))))),4===r&&o.a.createElement("div",null,o.a.createElement("div",{className:"table-responsive mb-16"},o.a.createElement("table",{className:"simple",style:{width:"60%"}},o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{className:"flex items-center"},o.a.createElement(u.fb,{className:"truncate"},"Width"))),o.a.createElement("td",null,o.a.createElement(u.fb,{className:"truncate"},n.width))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{className:"flex items-center"},o.a.createElement(u.fb,{className:"truncate"},"Height"))),o.a.createElement("td",null,o.a.createElement(u.fb,{className:"truncate"},n.height))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{className:"flex items-center"},o.a.createElement(u.fb,{className:"truncate"},"Depth"))),o.a.createElement("td",null,o.a.createElement(u.fb,{className:"truncate"},n.depth))),o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("div",{className:"flex items-center"},o.a.createElement(u.fb,{className:"truncate"},"Weight"))),o.a.createElement("td",null,o.a.createElement(u.fb,{className:"truncate"},n.weight))))))),5===r&&o.a.createElement("div",null,this.renderFields())),innerScroll:!0})}}]),t}(i.Component);t.default=Object(O.a)("ProductsApp",N.a)(Object(m.withStyles)((function(e){return{productImageFeaturedStar:{position:"absolute",top:0,right:0,color:p.orange[400],opacity:0},productImageItem:{transitionProperty:"box-shadow",transitionDuration:e.transitions.duration.short,transitionTimingFunction:e.transitions.easing.easeInOut,"&:hover":{boxShadow:e.shadows[5],"& $productImageFeaturedStar":{opacity:.8}},"&.featured":{pointerEvents:"none",boxShadow:e.shadows[3],"& $productImageFeaturedStar":{opacity:1},"&:hover $productImageFeaturedStar":{opacity:1}}}}}),{withTheme:!0})(Object(E.g)(Object(h.a)((function(e){var t=e.ProductsApp,a=e.auth;return{product:t.product,user:a.user,categories:t.categories}}),(function(e){return Object(b.c)({getProduct:P.n,saveEditProduct:P.q,getCats:P.m},e)}))(w))))}}]);